# M2.5 ‚Äî Dataclasses

–ú–æ–¥—É–ª—å –ø–æ—Å–≤—è—â—ë–Ω –≥–ª—É–±–æ–∫–æ–º—É –∏–∑—É—á–µ–Ω–∏—é `dataclasses` ‚Äî —É–¥–æ–±–Ω–æ–≥–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ Python –¥–ª—è –æ–ø–∏—Å–∞–Ω–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä –¥–∞–Ω–Ω—ã—Ö.
–ó–∞–¥–∞—á–∞ ‚Äî –Ω–∞—É—á–∏—Ç—å—Å—è —Å–æ–∑–¥–∞–≤–∞—Ç—å –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ, –≤–∞–ª–∏–¥–∏—Ä—É–µ–º—ã–µ, —Ö–æ—Ä–æ—à–æ —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö.

---

## üéØ –ß—Ç–æ —Ç—ã –æ—Å–≤–æ–∏—à—å

–í —ç—Ç–æ–º –º–æ–¥—É–ª–µ —Ç—ã –Ω–∞—É—á–∏—à—å—Å—è:

- –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–∞–∑–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ `dataclasses`
- —Ä–∞–±–æ—Ç–∞—Ç—å —Å –ø–æ–ª—è–º–∏, —Ç–∏–ø–∞–º–∏ –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ `field()`
- –ø–∏—Å–∞—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é –∏ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –≤ `__post_init__()`
- —Å–æ–∑–¥–∞–≤–∞—Ç—å –Ω–µ–∏–∑–º–µ–Ω—è–µ–º—ã–µ –∏ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ dataclass‚Äô—ã (`frozen`, `slots`)
- –ø—Ä–∏–º–µ–Ω—è—Ç—å `order=True` –¥–ª—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ –æ–±—ä–µ–∫—Ç–æ–≤
- –∏–∑–±–µ–≥–∞—Ç—å –ø—Ä–æ–±–ª–µ–º –∏–∑–º–µ–Ω—è–µ–º—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
- –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Å–ª–µ–¥–æ–≤–∞—Ç—å dataclasses
- –≤—ã–±–∏—Ä–∞—Ç—å –º–µ–∂–¥—É `dataclass`, `NamedTuple`, `TypedDict` –∏ –æ–±—ã—á–Ω—ã–º `class`
- —Å–æ–∑–¥–∞–≤–∞—Ç—å –º–∏–Ω–∏-DSL –¥–ª—è ML-–∫–æ–Ω—Ñ–∏–≥–æ–≤ (—Ñ–∏–Ω–∞–ª—å–Ω—ã–π –ø—Ä–æ–µ–∫—Ç `task24`)

---

## üìò –ü–æ–ª–Ω–∞—è —Ç–µ–æ—Ä–∏—è

### 1. –ß—Ç–æ —Ç–∞–∫–æ–µ dataclass

`dataclass` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç:

- `__init__`
- `__repr__`
- `__eq__`
- `__hash__` (–µ—Å–ª–∏ –≤–æ–∑–º–æ–∂–Ω–æ)
- –º–µ—Ç–æ–¥—ã —Å—Ä–∞–≤–Ω–µ–Ω–∏—è (`<`, `>`, ‚Ä¶) –ø—Ä–∏ `order=True`

–ü—Ä–∏–º–µ—Ä:

```python
from dataclasses import dataclass


@dataclass
class Point:
    x: int
    y: int


p = Point(1, 2)
print(p)  # Point(x=1, y=2)
```

–ë–µ–∑ `dataclass` —ç—Ç–æ—Ç –∫–ª–∞—Å—Å –ø—Ä–∏—à–ª–æ—Å—å –±—ã –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–∏—Å–∞—Ç—å —Ä—É–∫–∞–º–∏.

---

### 2. –ü–æ–ª—è –∏ –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏ —Ç–∏–ø–æ–≤

–¢–∏–ø—ã –Ω—É–∂–Ω—ã –¥–ª—è:

- –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–∏–≥–Ω–∞—Ç—É—Ä—ã –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞
- —É–¥–æ–±–Ω–æ–≥–æ —á—Ç–µ–Ω–∏—è –∏ –∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏—è –≤ IDE
- —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ (mypy –∏ —Ç.–ø.)

–ü—Ä–∏–º–µ—Ä—ã:

```python
from dataclasses import dataclass
from typing import Literal


@dataclass
class User:
    username: str
    age: int


@dataclass
class Temperature:
    value: float
    unit: Literal["C", "F"]
```

`dataclass` –æ–∂–∏–¥–∞–µ—Ç, —á—Ç–æ –≤—Å–µ –∑–Ω–∞—á–∏–º—ã–µ –ø–æ–ª—è –±—É–¥—É—Ç –∞–Ω–Ω–æ—Ç–∏—Ä–æ–≤–∞–Ω—ã.

---

### 3. `field()`: `default`, `default_factory`, `repr`, `compare`, `init`

`field()` –¥–∞—ë—Ç —Ç–æ–Ω–∫–∏–π –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ –æ—Ç–¥–µ–ª—å–Ω—ã–º –ø–æ–ª–µ–º.

#### `default`

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø—Ä–æ—Å—Ç—ã—Ö –Ω–µ–∏–∑–º–µ–Ω—è–µ–º—ã—Ö —Ç–∏–ø–æ–≤:

```python
from dataclasses import dataclass, field


@dataclass
class Config:
    timeout: int = 30
    mode: str = "production"
```

#### `default_factory`

–ò—Å–ø–æ–ª—å–∑—É–µ–º –¥–ª—è –∏–∑–º–µ–Ω—è–µ–º—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤:

```python
@dataclass
class Tags:
    values: list[str] = field(default_factory=list)
```

–ö–∞–∂–¥—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä –ø–æ–ª—É—á–∞–µ—Ç —Å–≤–æ–π —Å–ø–∏—Å–æ–∫.

#### `repr=False`

–°–∫—Ä—ã–≤–∞–µ—Ç –ø–æ–ª–µ –≤ `__repr__`:

```python
@dataclass
class Account:
    login: str
    password: str = field(repr=False)
```

```python
Account(login="user", password="secret")
# Account(login='user')
```

#### `compare=False`

–ò—Å–∫–ª—é—á–∞–µ—Ç –ø–æ–ª–µ –∏–∑ –æ–ø–µ—Ä–∞—Ü–∏–π —Å—Ä–∞–≤–Ω–µ–Ω–∏—è:

```python
@dataclass
class Item:
    id: int
    value: float
    timestamp: str = field(compare=False)
```

```python
Item(1, 10.0, "12:00") == Item(1, 10.0, "12:01")  # True
```

#### `init=False`

–ü–æ–ª–µ –Ω–µ –≤—Ö–æ–¥–∏—Ç –≤ `__init__`, –Ω–æ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ –æ–±—ä–µ–∫—Ç–µ.

–û–±—ã—á–Ω–æ –µ–≥–æ –∑–∞–ø–æ–ª–Ω—è—é—Ç –≤ `__post_init__`:

```python
@dataclass
class Rectangle:
    width: float
    height: float
    area: float = field(init=False)

    def __post_init__(self) -> None:
        self.area = self.width * self.height
```

---

### 4. `__post_init__` ‚Äî –≤–∞–ª–∏–¥–∞—Ü–∏—è –∏ –≤—ã—á–∏—Å–ª—è–µ–º—ã–µ –ø–æ–ª—è

`__post_init__` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è **–ø–æ—Å–ª–µ** –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ `__init__`.
–ó–¥–µ—Å—å —É–¥–æ–±–Ω–æ –¥–µ–ª–∞—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é, –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—é –∏ —Ä–∞—Å—á—ë—Ç—ã.

#### –í–∞–ª–∏–¥–∞—Ü–∏—è

```python
@dataclass
class Person:
    age: int

    def __post_init__(self) -> None:
        if self.age < 0:
            raise ValueError("–í–æ–∑—Ä–∞—Å—Ç –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–º")
```

#### –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è

```python
@dataclass
class CleanUser:
    username: str
    email: str

    def __post_init__(self) -> None:
        self.username = self.username.strip()
        self.email = self.email.strip().lower()
```

#### –í—ã—á–∏—Å–ª—è–µ–º—ã–µ –ø–æ–ª—è

```python
@dataclass
class Metrics:
    weight: float
    height: float
    bmi: float = field(init=False)

    def __post_init__(self) -> None:
        self.bmi = self.weight / (self.height ** 2)
```

---

### 5. `frozen=True` ‚Äî –Ω–µ–∏–∑–º–µ–Ω—è–µ–º—ã–µ –æ–±—ä–µ–∫—Ç—ã

`frozen=True` –¥–µ–ª–∞–µ—Ç —ç–∫–∑–µ–º–ø–ª—è—Ä –ª–æ–≥–∏—á–µ—Å–∫–∏ –Ω–µ–∏–∑–º–µ–Ω—è–µ–º—ã–º: –ª—é–±—ã–µ –ø–æ–ø—ã—Ç–∫–∏ –ø—Ä–∏—Å–≤–æ–µ–Ω–∏—è –ø–æ–ª–µ–π –≤—ã–∑—ã–≤–∞—é—Ç `FrozenInstanceError`.

```python
from dataclasses import dataclass


@dataclass(frozen=True)
class AppConfig:
    name: str
    version: str


cfg = AppConfig("Test", "1.0")
# cfg.version = "2.0"  # FrozenInstanceError
```

‚ö† –í–∞–∂–Ω–æ: –µ—Å–ª–∏ –≤ –ø–æ–ª—è—Ö –ª–µ–∂–∞—Ç –∏–∑–º–µ–Ω—è–µ–º—ã–µ –æ–±—ä–µ–∫—Ç—ã (—Å–ø–∏—Å–∫–∏, —Å–ª–æ–≤–∞—Ä–∏), –∏—Ö —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –≤—Å—ë —Ä–∞–≤–Ω–æ –º–æ–∂–Ω–æ –º–µ–Ω—è—Ç—å:

```python
@dataclass(frozen=True)
class A:
    values: list[int]


a = A([1, 2])
a.values.append(3)  # —ç—Ç–æ —Å—Ä–∞–±–æ—Ç–∞–µ—Ç
```

–î–ª—è –ø–æ–ª–Ω–æ–π –∏–º–º—É—Ç–∞–±–µ–ª—å–Ω–æ—Å—Ç–∏ —Å—Ç–æ–∏—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–µ–∏–∑–º–µ–Ω—è–µ–º—ã–µ —Ç–∏–ø—ã (`tuple`, `frozenset`, –∏ —Ç.–ø.).

---

### 6. `slots=True` ‚Äî –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–∞–º—è—Ç–∏ –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –æ–±—ä–µ–∫—Ç–∞

`slots=True` –∑–∞–ø—Ä–µ—â–∞–µ—Ç –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∞—Ç—Ä–∏–±—É—Ç–æ–≤ –∏ —Ö—Ä–∞–Ω–∏—Ç –ø–æ–ª—è —á–µ—Ä–µ–∑ `__slots__`, –∞ –Ω–µ —á–µ—Ä–µ–∑ `__dict__`:

```python
@dataclass(slots=True)
class Point3D:
    x: float
    y: float
    z: float
```

–ü–ª—é—Å—ã:

- –º–µ–Ω—å—à–µ –ø–∞–º—è—Ç–∏ –Ω–∞ –∫–∞–∂–¥—ã–π –æ–±—ä–µ–∫—Ç
- –±—ã—Å—Ç—Ä–µ–µ –¥–æ—Å—Ç—É–ø –∫ –∞—Ç—Ä–∏–±—É—Ç–∞–º
- –Ω–µ–ª—å–∑—è –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω–æ ¬´–ø—Ä–∏–≤–∏–Ω—Ç–∏—Ç—å¬ª –Ω–æ–≤—ã–µ –ø–æ–ª—è –Ω–∞ –ª–µ—Ç—É (—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–∞)

---

### 7. `order=True` ‚Äî —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –æ–±—ä–µ–∫—Ç–æ–≤

–ü—Ä–∏ `order=True` dataclass –ø–æ–ª—É—á–∞–µ—Ç –º–µ—Ç–æ–¥—ã:

- `__lt__`
- `__le__`
- `__gt__`
- `__ge__`

–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –∏–¥—ë—Ç –ø–æ –ø–æ–ª—è–º –≤ –ø–æ—Ä—è–¥–∫–µ –∏—Ö –æ–±—ä—è–≤–ª–µ–Ω–∏—è.

```python
@dataclass(order=True)
class Score:
    points: int


print(Score(10) < Score(20))  # True
```

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –∏—Å–∫–ª—é—á–∏—Ç—å –ø–æ–ª–µ –∏–∑ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è:

```python
@dataclass(order=True)
class Result:
    metric: float
    timestamp: str = field(compare=False)
```

```python
r1 = Result(0.9, "10:00")
r2 = Result(0.8, "10:05")
print(sorted([r1, r2]))  # —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ metric
```

---

### 8. –û–ø–∞—Å–Ω–æ—Å—Ç—å –∏–∑–º–µ–Ω—è–µ–º—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

–ù–µ–ª—å–∑—è –∑–∞–ø–∏—Å—ã–≤–∞—Ç—å –∏–∑–º–µ–Ω—è–µ–º—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –Ω–∞–ø—Ä—è–º—É—é:

```python
@dataclass
class Bad:
    tags: list[str] = []  # ‚ùå –æ–¥–∏–Ω —Å–ø–∏—Å–æ–∫ –Ω–∞ –≤—Å–µ —ç–∫–∑–µ–º–ø–ª—è—Ä—ã
```

–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç:

```python
from dataclasses import field


@dataclass
class Good:
    tags: list[str] = field(default_factory=list)


a = Good()
b = Good()

a.tags.append("ml")
print(b.tags)  # []
```

–¢–æ –∂–µ –¥–ª—è `dict`, `set` –∏ –¥—Ä—É–≥–∏—Ö –∏–∑–º–µ–Ω—è–µ–º—ã—Ö —Ç–∏–ø–æ–≤.

---

### 9. –ù–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ dataclass

–†–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –æ–±—ã—á–Ω–æ–µ –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ: –ø–æ–ª—è –±–∞–∑–æ–≤–æ–≥–æ –∫–ª–∞—Å—Å–∞ –ø–µ—Ä–µ—Ö–æ–¥—è—Ç –≤ –Ω–∞—Å–ª–µ–¥–Ω–∏–∫–∞.

```python
@dataclass
class User:
    username: str
    email: str


@dataclass
class Admin(User):
    is_superuser: bool = True
```

–ï—Å–ª–∏ –∏ –±–∞–∑–æ–≤—ã–π, –∏ –Ω–∞—Å–ª–µ–¥–Ω—ã–π –∫–ª–∞—Å—Å –∏—Å–ø–æ–ª—å–∑—É—é—Ç `__post_init__`, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –≤—ã–∑—ã–≤–∞—Ç—å `super()`:

```python
@dataclass
class Worker:
    name: str
    base_salary: float

    def __post_init__(self) -> None:
        self.base_salary = round(self.base_salary, 2)


@dataclass
class Employee(Worker):
    bonus: float

    def __post_init__(self) -> None:
        super().__post_init__()
        self.bonus = round(self.bonus, 2)
```

---

### 10. Dataclass vs NamedTuple vs TypedDict vs class

–ö—Ä–∞—Ç–∫–∞—è —Ç–∞–±–ª–∏—Ü–∞ –≤—ã–±–æ—Ä–∞:

| –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç      | –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å                               |
|-----------------|--------------------------------------------------|
| `dataclass`     | –¥–∞–Ω–Ω—ã–µ + –ª–æ–≥–∏–∫–∞, –≤–∞–ª–∏–¥–∞—Ü–∏—è, –≤—ã—á–∏—Å–ª—è–µ–º—ã–µ –ø–æ–ª—è     |
| `NamedTuple`    | –ª—ë–≥–∫–∏–µ, –±—ã—Å—Ç—Ä—ã–µ, –Ω–µ–∏–∑–º–µ–Ω—è–µ–º—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã          |
| `TypedDict`     | —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–ª–æ–≤–∞—Ä–∏ (JSON / API)              |
| –û–±—ã—á–Ω—ã–π `class` | —Å–ª–æ–∂–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ, –º–Ω–æ–≥–æ –º–µ—Ç–æ–¥–æ–≤ –∏ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ |

#### –ü—Ä–∏–º–µ—Ä—ã:

**NamedTuple**:

```python
from typing import NamedTuple


class Point(NamedTuple):
    x: int
    y: int
```

**TypedDict**:

```python
from typing import TypedDict


class UserJSON(TypedDict):
    id: int
    username: str
```

–û–±—ã—á–Ω—ã–π `class` ‚Äî –∫–æ–≥–¥–∞ –æ–±—ä–µ–∫—Ç –Ω–µ –ø—Ä–æ—Å—Ç–æ —Ö—Ä–∞–Ω–∏—Ç –¥–∞–Ω–Ω—ã–µ, –∞ —Ä–µ–∞–ª–∏–∑—É–µ—Ç –ø–æ–≤–µ–¥–µ–Ω–∏–µ, –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É, —à–∞–±–ª–æ–Ω—ã –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è,
—Ä–∞–±–æ—Ç–∞–µ—Ç —Å –ë–î –∏ —Ç.–ø.

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —à–∞–≥–∞

–ü—Ä–∏–º–µ—Ä–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –º–æ–¥—É–ª—è:

```text
M02_Advanced_Python/
‚îî‚îÄ‚îÄ 05_dataclasses/
    ‚îú‚îÄ‚îÄ task01_point2d.py
    ‚îú‚îÄ‚îÄ task02_user_profile.py
    ‚îú‚îÄ‚îÄ task03_product.py
    ‚îú‚îÄ‚îÄ task04_log_record.py
    ‚îú‚îÄ‚îÄ task05_temperature.py
    ‚îú‚îÄ‚îÄ task06_clean_user.py
    ‚îú‚îÄ‚îÄ task07_person_metrics.py
    ‚îú‚îÄ‚îÄ task08_app_config_frozen.py
    ‚îú‚îÄ‚îÄ task09_slots_point3d.py
    ‚îú‚îÄ‚îÄ task10_kw_only_user.py
    ‚îú‚îÄ‚îÄ task11_account_repr_hide.py
    ‚îú‚îÄ‚îÄ task12_rectangle_area.py
    ‚îú‚îÄ‚îÄ task13_item_compare_false.py
    ‚îú‚îÄ‚îÄ task14_score_order.py
    ‚îú‚îÄ‚îÄ task15_mutable_default_fail.py
    ‚îú‚îÄ‚îÄ task16_mutable_default_fix.py
    ‚îú‚îÄ‚îÄ task17_book.py
    ‚îú‚îÄ‚îÄ task18_userprofile_post_init.py
    ‚îú‚îÄ‚îÄ task19_dataclass_inheritance_1.py
    ‚îú‚îÄ‚îÄ task20_dataclass_inheritance_2.py
    ‚îú‚îÄ‚îÄ task21_worker_employee_post_init.py
    ‚îú‚îÄ‚îÄ task22_concept_choosing_tools.md
    ‚îú‚îÄ‚îÄ task23_mutable_collections_mix.py
    ‚îú‚îÄ‚îÄ task24_experiment_config_v2.py   ‚Üê —Ñ–∏–Ω–∞–ª—å–Ω—ã–π –º–∏–Ω–∏-–ø—Ä–æ–µ–∫—Ç
    ‚îî‚îÄ‚îÄ README.md
```

–ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –∏–º–µ–Ω–∞ –∑–∞–¥–∞—á –º–æ–≥—É—Ç –æ—Ç–ª–∏—á–∞—Ç—å—Å—è, –≤–∞–∂–Ω–æ, —á—Ç–æ–±—ã:

- –±–∞–∑–æ–≤—ã–µ –ø—Ä–∏—ë–º—ã (`@dataclass`, `__post_init__`, `field()`) –±—ã–ª–∏ –ø–æ–∫—Ä—ã—Ç—ã;
- –±—ã–ª–∏ –∑–∞–¥–∞—á–∏ –Ω–∞ `frozen`, `slots`, `order`, `compare=False`, `repr=False`, `init=False`;
- –±—ã–ª–∏ –∑–∞–¥–∞—á–∏ –Ω–∞ `default_factory` –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ mutable-default –ø—Ä–æ–±–ª–µ–º—ã;
- –±—ã–ª–∏ –∑–∞–¥–∞—á–∏ –Ω–∞ –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –∏ `super().__post_init__()`;
- —Ñ–∏–Ω–∞–ª—å–Ω–∞—è –∑–∞–¥–∞—á–∞ (–∫–∞–∫ `task24`) —Å–æ–±–∏—Ä–∞–ª–∞ –≤—Å—ë –≤–º–µ—Å—Ç–µ.

---

## üß© –ó–∞–¥–∞–Ω–∏—è

### –ë–ª–æ–∫ 1 ‚Äî –±–∞–∑–æ–≤—ã–µ dataclasses

–°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ—Å—Ç—ã—Ö –º–æ–¥–µ–ª–µ–π:

- —Ç–æ—á–∫–∏, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –ø—Ä–æ–¥—É–∫—Ç–∞, –ª–æ–≥-–∑–∞–ø–∏—Å–∏;
- —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤;
- –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π `__repr__` –∏ `__eq__`;
- –ø–µ—Ä–≤—ã–µ –∑–∞–¥–∞—á–∏ —Å `__post_init__` (–≤–∞–ª–∏–¥–∞—Ü–∏—è –∏ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è).

### –ë–ª–æ–∫ 2 ‚Äî —Ä–∞–±–æ—Ç–∞ —Å `field()` –∏ mutable default

- –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø—Ä–∏–º–µ—Ä —Å `list = []` –∏ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –±–∞–≥–∞;
- –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ `field(default_factory=list)`;
- –∫–æ–Ω—Ñ–∏–≥–∏ —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –ø–æ–ª—è–º–∏-–∫–æ–ª–ª–µ–∫—Ü–∏—è–º–∏ (`dict`, `list`, `set`).

### –ë–ª–æ–∫ 3 ‚Äî —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã dataclass

- `frozen=True` ‚Äî –∫–æ–Ω—Ñ–∏–≥–∏, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ–ª—å–∑—è –º–µ–Ω—è—Ç—å –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è;
- `slots=True` ‚Äî –æ–±—ä–µ–∫—Ç—ã —Å —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π;
- `repr=False` ‚Äî —Å–∫—Ä—ã—Ç–∏–µ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (–ø–∞—Ä–æ–ª–∏, —Ç–æ–∫–µ–Ω—ã);
- `compare=False` ‚Äî –ø–æ–ª—è, –Ω–µ —É—á–∞—Å—Ç–≤—É—é—â–∏–µ –≤ —Å—Ä–∞–≤–Ω–µ–Ω–∏–∏ (timestamp, metadata);
- `order=True` ‚Äî —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ –º–µ—Ç—Ä–∏–∫–µ –∏–ª–∏ score.

### –ë–ª–æ–∫ 4 ‚Äî –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ

- –±–∞–∑–æ–≤—ã–π `User` –∏ –Ω–∞—Å–ª–µ–¥–Ω–∏–∫–∏ `Admin`, `Employee`, –∏ —Ç.–¥.;
- `__post_init__` –≤ –±–∞–∑–æ–≤–æ–º –∏ –¥–æ—á–µ—Ä–Ω–µ–º –∫–ª–∞—Å—Å–µ;
- –≤—ã–∑–æ–≤ `super().__post_init__()` –∏ –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–≥–∏–∫–∏.

### –ë–ª–æ–∫ 5 ‚Äî –≤—ã–±–æ—Ä –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ (–∫–æ–Ω—Ü–µ–ø—Ü–∏—è)

–ù–µ–±–æ–ª—å—à–∏–µ –∑–∞–¥–∞—á–∫–∏ ¬´–Ω–∞ –º—ã—à–ª–µ–Ω–∏–µ¬ª:
–∫–∞–∫–æ–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –ª—É—á—à–µ –ø–æ–¥–æ–π–¥—ë—Ç –¥–ª—è:

- —Ç–æ—á–∫–∏ –≤ 2D/3D;
- –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞;
- JSON-–æ—Ç–≤–µ—Ç–∞ –æ—Ç API;
- –ª–æ–≥–æ–≤ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö;
- —Å—É—â–Ω–æ—Å—Ç–∏ —Å –±–æ–ª—å—à–∏–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –º–µ—Ç–æ–¥–æ–≤.

### –ë–ª–æ–∫ 6 ‚Äî —Ñ–∏–Ω–∞–ª—å–Ω—ã–π –ø—Ä–æ–µ–∫—Ç: `task24_experiment_config_v2.py`

–ò—Ç–æ–≥–æ–≤–∞—è –∏–Ω–∂–µ–Ω–µ—Ä–Ω–∞—è –∑–∞–¥–∞—á–∞: –æ–ø–∏—Å–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥–∏ ML-—ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤ —á–µ—Ä–µ–∑ dataclasses.

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:

- –Ω–µ—Å–∫–æ–ª—å–∫–æ dataclass‚Äô–æ–≤ (`DatasetConfig`, `ModelConfig`, `ExperimentConfig`, `ExperimentResult`);
- –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç—å dataclasses (—ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç –≤–∫–ª—é—á–∞–µ—Ç –¥–∞—Ç–∞—Å–µ—Ç –∏ –º–æ–¥–µ–ª—å);
- `slots=True` –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏;
- `frozen=True` –¥–ª—è —á–∞—Å—Ç–∏ –∫–æ–Ω—Ñ–∏–≥–æ–≤;
- `order=True` –¥–ª—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤;
- `field(default_factory=...)` –¥–ª—è –∫–æ–ª–ª–µ–∫—Ü–∏–π;
- `__post_init__()` –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∏ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏;
- —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ —Å–ø–∏—Å–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ –º–µ—Ç—Ä–∏–∫–µ.

---

## ‚ñ∂Ô∏è –ö–∞–∫ –∑–∞–ø—É—Å–∫–∞—Ç—å

–ü—Ä–∏–º–µ—Ä –¥–ª—è –∏—Ç–æ–≥–æ–≤–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞:

```bash
poetry run python M02_Advanced_Python/05_dataclasses/task24_experiment_config_v2.py
```

–∏–ª–∏, –µ—Å–ª–∏ —Ç—ã –Ω–∞—Ö–æ–¥–∏—à—å—Å—è –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –º–æ–¥—É–ª—è:

```bash
python task24_experiment_config_v2.py
```

–ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ –¥–ª—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö –∑–∞–¥–∞—á: –∫–∞–∂–¥–∞—è –∑–∞–¥–∞—á–∞ ‚Äî —ç—Ç–æ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Å–∫—Ä–∏–ø—Ç —Å `if __name__ == "__main__": main()`.

---

## ‚úÖ –ö—Ä–∏—Ç–µ—Ä–∏–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏

–ú–æ–¥—É–ª—å M2.5 –º–æ–∂–Ω–æ —Å—á–∏—Ç–∞—Ç—å –∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã–º, –µ—Å–ª–∏:

- —Ç—ã –ø–æ–Ω–∏–º–∞–µ—à—å, –∫–∞–∫–∏–µ –º–µ—Ç–æ–¥—ã –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç `@dataclass` –∏ –∑–∞—á–µ–º;
- —Å–≤–æ–±–æ–¥–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—à—å `field()` —Å `default`, `default_factory`, `repr`, `compare`, `init`;
- —É–º–µ–µ—à—å –ø–∏—Å–∞—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é –∏ –≤—ã—á–∏—Å–ª—è–µ–º—ã–µ –ø–æ–ª—è –≤ `__post_init__()`;
- –æ—Å–æ–∑–Ω–∞–Ω–Ω–æ –ø—Ä–∏–º–µ–Ω—è–µ—à—å `frozen`, `slots`, `order` —Ç–∞–º, –≥–¥–µ —ç—Ç–æ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –Ω—É–∂–Ω–æ;
- –Ω–µ –¥–æ–ø—É—Å–∫–∞–µ—à—å –æ—à–∏–±–æ–∫ —Å –∏–∑–º–µ–Ω—è–µ–º—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é;
- —É–º–µ–µ—à—å –Ω–∞—Å–ª–µ–¥–æ–≤–∞—Ç—å dataclasses –∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –≤—ã–∑—ã–≤–∞—Ç—å `super().__post_init__()`;
- –º–æ–∂–µ—à—å –æ–±—ä—è—Å–Ω–∏—Ç—å, –∫–æ–≥–¥–∞ —Å—Ç–æ–∏—Ç –≤—ã–±—Ä–∞—Ç—å `dataclass`, –∞ –∫–æ–≥–¥–∞ ‚Äî `NamedTuple`, `TypedDict` –∏–ª–∏ –æ–±—ã—á–Ω—ã–π `class`;
- —É —Ç–µ–±—è —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ñ–∏–Ω–∞–ª—å–Ω—ã–π –º–∏–Ω–∏-–ø—Ä–æ–µ–∫—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä, `task24_experiment_config_v2.py`).

---

## üõü –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

**–ü—Ä–æ–±–ª–µ–º–∞:** `FrozenInstanceError`

- –¢—ã –ø—ã—Ç–∞–µ—à—å—Å—è –∏–∑–º–µ–Ω–∏—Ç—å –ø–æ–ª–µ dataclass —Å `frozen=True`.
  ‚ûú –ü—Ä–æ–≤–µ—Ä—å, –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –ª–∏ –æ–±—ä–µ–∫—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–µ–∏–∑–º–µ–Ω—è–µ–º—ã–º.
  ‚ûú –ï—Å–ª–∏ –Ω—É–∂–Ω–æ –º–µ–Ω—è—Ç—å ‚Äî —É–±–µ—Ä–∏ `frozen=True` –∏–ª–∏ –∏–∑–º–µ–Ω–∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É.

**–ü—Ä–æ–±–ª–µ–º–∞:** ¬´—Ä–∞–∑–¥–µ–ª—è–µ–º—ã–π¬ª —Å–ø–∏—Å–æ–∫ –∏–ª–∏ —Å–ª–æ–≤–∞—Ä—å –º–µ–∂–¥—É –æ–±—ä–µ–∫—Ç–∞–º–∏

- –°–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ, —Ç—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª `tags: list[str] = []`.
  ‚ûú –ó–∞–º–µ–Ω–∏ –Ω–∞ `field(default_factory=list)`.

**–ü—Ä–æ–±–ª–µ–º–∞:** —Å—Ç—Ä–∞–Ω–Ω–∞—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –∏–ª–∏ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ dataclasses

- –ü–æ–º–Ω–∏, —á—Ç–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –∏–¥—ë—Ç –ø–æ –ø–æ–ª—è–º —Å–≤–µ—Ä—Ö—É –≤–Ω–∏–∑.
  ‚ûú –ò—Å–ø–æ–ª—å–∑—É–π `field(compare=False)`, —á—Ç–æ–±—ã –∏—Å–∫–ª—é—á–∏—Ç—å –ø–æ–ª–µ –∏–∑ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è.
  ‚ûú –ü—Ä–æ–≤–µ—Ä—å –ø–æ—Ä—è–¥–æ–∫ –ø–æ–ª–µ–π –≤ –æ–±—ä—è–≤–ª–µ–Ω–∏–∏ –∫–ª–∞—Å—Å–∞.

**–ü—Ä–æ–±–ª–µ–º–∞:** `TypeError: non-default argument follows default argument`

- –í dataclass, –∫–∞–∫ –∏ –≤ –æ–±—ã—á–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏—è—Ö, –ø–æ–ª—è –±–µ–∑ –∑–Ω–∞—á–µ–Ω–∏–π –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–æ–ª–∂–Ω—ã –∏–¥—Ç–∏ –ø–µ—Ä–µ–¥ –ø–æ–ª—è–º–∏ —Å `default` /
  `default_factory`.
  ‚ûú –†–∞—Å—Å—Ç–∞–≤—å –ø–æ–ª—è: —Å–Ω–∞—á–∞–ª–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ, –ø–æ—Ç–æ–º —Å default.

---
