# M1.9 ‚Äî –ê–Ω–Ω–æ—Ç–∞—Ü–∏–∏ —Ç–∏–ø–æ–≤ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (typing + mypy + pytest)

–ö–æ—Ä–æ—Ç–∫–∞—è —Ü–µ–ª—å –º–æ–¥—É–ª—è: —É–≤–µ—Ä–µ–Ω–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏ —Ç–∏–ø–æ–≤ –≤ Python (–≤–∫–ª—é—á–∞—è `Union/Optional`, `Callable`, –¥–∂–µ–Ω–µ—Ä–∏–∫–∏, `TypedDict/NamedTuple`, **(–æ–ø—Ü.)** –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π `@dataclass`) –∏ –ø–∏—Å–∞—Ç—å –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ, –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º—ã–µ —Ç–µ—Å—Ç—ã –Ω–∞ `pytest` —Å —Ñ–∏–∫—Å—Ç—É—Ä–∞–º–∏. –í—Å–µ –∑–∞–¥–∞–Ω–∏—è –≤—ã–ø–æ–ª–Ω—è–µ–º –ø–æ **–Ω–∞—à–µ–º—É –º–∏–∫—Ä–æ-—Ü–∏–∫–ª—É**: –∑–∞–¥–∞—á–∞ ‚Üí —Ç–µ—Å—Ç ‚Üí `mypy --strict` ‚Üí `pytest` ‚úÖ

---

## üéØ –ß—Ç–æ —Ç—ã –æ—Å–≤–æ–∏—à—å
- –ë–∞–∑–æ–≤—ã–µ –∏ –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏: `list[str]`, `dict[str, int]`, `tuple[int, int]`, `int|float`, `str|None`.
- `Union`/`Optional`, `Callable`, alias-—ã —Ç–∏–ø–æ–≤; –¥–∂–µ–Ω–µ—Ä–∏–∫–∏ —á–µ—Ä–µ–∑ `TypeVar` (–≤ —Ç.—á. –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è `bound=`/`constraints`).
- –û–ø–∏—Å–∞–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä –±–µ–∑ –û–û–ü: `TypedDict`, `NamedTuple` (–∏ **(–æ–ø—Ü.)** –∏–º–º—É—Ç–∞–±–µ–ª—å–Ω—ã–π `@dataclass` –∫–∞–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–∞–Ω–Ω—ã—Ö).
- –°—Ç–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤ —Å `mypy --strict`: –∫–∞–∫ –ª–æ–≤–∏—Ç—å —É—Ç–µ—á–∫–∏ `Optional`, –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã–µ `return` –∏ –Ω–µ—Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ —Ç–∏–ø–æ–≤.
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ `pytest`: —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ `tests/`, –ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–∞—Ü–∏—è, —Ñ–∏–∫—Å—Ç—É—Ä—ã (`tmp_path`, `monkeypatch`, `capsys`, `raises`).

---

## üìò –ü–æ–ª–Ω–∞—è —Ç–µ–æ—Ä–∏—è

### 1. –ó–∞—á–µ–º —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞—Ç—å Python
Python ‚Äî –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π, –æ—à–∏–±–∫–∏ —Ç–∏–ø–æ–≤ –≤—Å–ø–ª—ã–≤–∞—é—Ç **–≤–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è**. –ê–Ω–Ω–æ—Ç–∞—Ü–∏–∏:
- —Å–ª—É–∂–∞—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π;
- –ø–æ–∑–≤–æ–ª—è—é—Ç IDE/–ª–∏–Ω—Ç–µ—Ä–∞–º –ø–æ–¥—Å–≤–µ—á–∏–≤–∞—Ç—å –æ—à–∏–±–∫–∏ –∑–∞—Ä–∞–Ω–µ–µ;
- —É–ª—É—á—à–∞—é—Ç —á–∏—Ç–∞–µ–º–æ—Å—Ç—å –∏ —Å–æ–ø—Ä–æ–≤–æ–∂–¥–∞–µ–º–æ—Å—Ç—å –∫–æ–¥–∞.

–ê–Ω–Ω–æ—Ç–∞—Ü–∏–∏ **–Ω–µ –º–µ–Ω—è—é—Ç –ø–æ–≤–µ–¥–µ–Ω–∏–µ** –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ç–æ—Ä–∞: —ç—Ç–æ –ø–æ–¥—Å–∫–∞–∑–∫–∏ –¥–ª—è –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ (`mypy`, IDE).

> –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: –≤ –º–æ–¥—É–ª—è—Ö, –≥–¥–µ –±—ã–≤–∞—é—Ç –ø–µ—Ä–µ–∫—Ä—ë—Å—Ç–Ω—ã–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ —Ç–∏–ø—ã, –¥–æ–±–∞–≤–ª—è–π—Ç–µ `from __future__ import annotations` –≤ –Ω–∞—á–∞–ª–æ —Ñ–∞–π–ª–∞ ‚Äî —ç—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–º–µ–Ω–∞ —Ç–∏–ø–æ–≤ –¥–æ –∏—Ö —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è (—É–¥–æ–±–Ω–æ –¥–ª—è –≤–∑–∞–∏–º–Ω—ã—Ö —Å—Å—ã–ª–æ–∫).

---

### 2. –°–∏–Ω—Ç–∞–∫—Å–∏—Å –∞–Ω–Ω–æ—Ç–∞—Ü–∏–π: –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏ —Ñ—É–Ω–∫—Ü–∏–∏
```python
# –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
pi: float = 3.14159
label: str = "ok"
flags: list[bool] = [True, False]

# –§—É–Ω–∫—Ü–∏–∏
def area(r: float) -> float:
    return pi * r * r

def greet(name: str, excited: bool = False) -> str:
    return f"Hello, {name}{'!' if excited else ''}"
```
- –ê–Ω–Ω–æ—Ç–∞—Ü–∏—è –∞—Ä–≥—É–º–µ–Ω—Ç–∞ ‚Äî –ø–æ—Å–ª–µ –¥–≤–æ–µ—Ç–æ—á–∏—è.
- –í–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–π —Ç–∏–ø ‚Äî –ø–æ—Å–ª–µ `->`.
- –ï—Å–ª–∏ —Ñ—É–Ω–∫—Ü–∏—è –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–∏—á–µ–≥–æ: `-> None`.

> –ù–æ—Ç–∞—Ü–∏—è –∫–æ–ª–ª–µ–∫—Ü–∏–π `list[str]`, `dict[str, int]`, `set[int]` ‚Äî —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è (Py3.9+).

---

### 3. –ö–æ–ª–ª–µ–∫—Ü–∏–∏ –∏ –∫–æ—Ä—Ç–µ–∂–∏
```python
users: dict[str, int] = {"alice": 1, "bob": 2}
points: list[tuple[int, int]] = [(0, 0), (2, 3)]
```
- **–ö–æ—Ä—Ç–µ–∂ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –¥–ª–∏–Ω—ã**: `tuple[int, int]` ‚Äî —Ä–æ–≤–Ω–æ –¥–≤–∞ —ç–ª–µ–º–µ–Ω—Ç–∞.
- **–ü—Ä–æ–∏–∑–≤–æ–ª—å–Ω–æ–π –¥–ª–∏–Ω—ã –æ–¥–Ω–æ–≥–æ —Ç–∏–ø–∞**: `tuple[int, ...]`.

---

### 4. Union –∏ Optional
- `Union` –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –¥–æ–ø—É—Å—Ç–∏–º—ã—Ö —Ç–∏–ø–æ–≤: `int|float` (—ç–∫–≤–∏–≤–∞–ª–µ–Ω—Ç `Union[int, float]`).
- `Optional[T]` ‚Äî —ç—Ç–æ `T | None`. –ù–∞–ø—Ä–∏–º–µ—Ä: `str | None`.

–ü–∞—Ç—Ç–µ—Ä–Ω —Ä–∞–±–æ—Ç—ã —Å `Optional`:
```python
def parse_int(s: str) -> int | None:
    try:
        return int(s.strip())
    except ValueError:
        return None

value = parse_int("  42 ")
if value is not None:
    print(value + 1)     # –±–µ–∑–æ–ø–∞—Å–Ω–æ
# –∏–Ω–∞—á–µ ‚Äî –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º None
```

---

### 5. Callable –∏ –ø—Å–µ–≤–¥–æ–Ω–∏–º—ã —Ç–∏–ø–æ–≤ (type alias)
`Callable[[A, B], R]` –æ–ø–∏—Å—ã–≤–∞–µ—Ç —Ç–∏–ø —Ñ—É–Ω–∫—Ü–∏–∏: –ø—Ä–∏–Ω–∏–º–∞–µ—Ç A –∏ B, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç R.
```python
from typing import Callable

BinOp = Callable[[int, int], int]  # type alias

def apply_all(x: int, y: int, ops: list[BinOp]) -> list[int]:
    return [op(x, y) for op in ops]
```
- –ï—Å–ª–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –Ω–µ–≤–∞–∂–Ω—ã: `Callable[..., R]` (–Ω–æ –ª—É—á—à–µ —É–∫–∞–∑—ã–≤–∞—Ç—å —Ç–æ—á–Ω—ã–µ —Å–∏–≥–Ω–∞—Ç—É—Ä—ã).
- –ê–ª–∏–∞—Å—ã —Ç–∏–ø–æ–≤ –¥–µ–ª–∞—é—Ç –∫–æ–¥ –∫–æ–º–ø–∞–∫—Ç–Ω–µ–µ –∏ –ø–æ–Ω—è—Ç–Ω–µ–µ.

---

### 6. –î–∂–µ–Ω–µ—Ä–∏–∫–∏ —á–µ—Ä–µ–∑ TypeVar
–î–ª—è –æ–±–æ–±—â—ë–Ω–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π –∏—Å–ø–æ–ª—å–∑—É–µ–º `TypeVar`:
```python
from typing import TypeVar, Callable

T = TypeVar("T")
U = TypeVar("U")

def map_strict(xs: list[T], f: Callable[[T], U]) -> list[U]:
    return [f(x) for x in xs]
```
- –ú–æ–∂–Ω–æ –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞—Ç—å —Ç–∏–ø-–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:
  - `K = TypeVar("K", bound=hash)` ‚Äî –∫–ª—é—á –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Ö—ç—à–∏—Ä—É–µ–º—ã–º.
  - –∏–ª–∏ `C = TypeVar("C", int, float)` ‚Äî —Ä–∞–∑—Ä–µ—à–µ–Ω—ã —Ç–æ–ª—å–∫–æ –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–Ω—ã–µ —Ç–∏–ø—ã.

–ü—Ä–∏–º–µ—Ä –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏:
```python
from typing import Hashable, TypeVar, Callable

T = TypeVar("T")
K = TypeVar("K", bound=Hashable)

def group_by(xs: list[T], key: Callable[[T], K]) -> dict[K, list[T]]:
    out: dict[K, list[T]] = {}
    for x in xs:
        k = key(x)
        out.setdefault(k, []).append(x)
    return out
```

---

### 7. TypedDict –∏ NamedTuple (—Å—Ç—Ä—É–∫—Ç—É—Ä—ã –±–µ–∑ –û–û–ü)

**TypedDict** ‚Äî ¬´—Å—Ç—Ä–æ–≥–∏–π —Å–ª–æ–≤–∞—Ä—å¬ª —Å –æ–ø–∏—Å–∞–Ω–Ω–æ–π —Å—Ö–µ–º–æ–π –∫–ª—é—á–µ–π.
```python
from typing import TypedDict

class UserTD(TypedDict):
    id: int
    name: str
    tags: list[str]
```
- –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤—Å–µ –∫–ª—é—á–∏ **–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ**.
- –ú–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º–∏: `class OptUser(TypedDict, total=False): ...`

**NamedTuple** ‚Äî ¬´–∫–æ—Ä—Ç–µ–∂ —Å –ø–æ–ª—è–º–∏¬ª, –Ω–µ–∏–∑–º–µ–Ω—è–µ–º—ã–π –∏ –ø–æ–∑–∏—Ü–∏–æ–Ω–Ω—ã–π.
```python
from typing import NamedTuple
import math

class Point2D(NamedTuple):
    x: float
    y: float

def length(p: Point2D) -> float:
    return math.hypot(p.x, p.y)
```

–ö–æ–≥–¥–∞ —á—Ç–æ –≤—ã–±–∏—Ä–∞—Ç—å:
- `TypedDict` ‚Äî –∫–æ–≥–¥–∞ –¥–∞–Ω–Ω—ã–µ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ —Å–ª–æ–≤–∞—Ä–Ω—ã–µ (–∫–ª—é—á–∏-—Å—Ç—Ä–æ–∫–∏).
- `NamedTuple` ‚Äî –∫–æ–≥–¥–∞ –≤–∞–∂–Ω–∞ –∫–æ–º–ø–∞–∫—Ç–Ω–æ—Å—Ç—å/–Ω–µ–∏–∑–º–µ–Ω—è–µ–º–æ—Å—Ç—å –∏ –ø–æ–∑–∏—Ü–∏–æ–Ω–Ω–∞—è —Å–µ–º–∞–Ω—Ç–∏–∫–∞.

---

### 8. Dataclass (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –∫–∞–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–∞–Ω–Ω—ã—Ö)
`@dataclass` —É—Å–∫–æ—Ä—è–µ—Ç –æ–±—ä—è–≤–ª–µ–Ω–∏–µ ¬´–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤¬ª.
```python
from dataclasses import dataclass, field

@dataclass(frozen=True)
class Note:
    title: str
    tags: list[str] = field(default_factory=list)  # –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º –ø—É—Å—Ç–æ–π —Å–ø–∏—Å–æ–∫ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –Ω–∞–ø—Ä—è–º—É—é!
```
–ö–ª—é—á–µ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:
- `frozen=True` ‚Äî –∏–º–º—É—Ç–∞–±–µ–ª—å–Ω–æ—Å—Ç—å (–∑–∞–ø—Ä–µ—Ç –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –ø–æ–ª–µ–π).
- `eq=True`/`order=True` ‚Äî –∞–≤—Ç–æ-–≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Å—Ä–∞–≤–Ω–µ–Ω–∏–π/–ø–æ—Ä—è–¥–∫–∞.
- `slots=True` ‚Äî —ç–∫–æ–Ω–æ–º–∏—è –ø–∞–º—è—Ç–∏/—É—Å–∫–æ—Ä–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞ –∫ –ø–æ–ª—è–º (Py3.10+).

**–í–∞–∂–Ω—ã–π –∞–Ω—Ç–∏-–ø–∞—Ç—Ç–µ—Ä–Ω:** –Ω–µ –ø–∏—Å–∞—Ç—å `tags: list[str] = []`. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `default_factory=list`, –∏–Ω–∞—á–µ –æ–¥–∏–Ω —Å–ø–∏—Å–æ–∫ —Ä–∞–∑–¥–µ–ª—è—Ç –≤—Å–µ —ç–∫–∑–µ–º–ø–ª—è—Ä—ã.

---

### 9. –†–∞–±–æ—Ç–∞ `mypy` –∏ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫:
```bash
pip install mypy
mypy path/to/module_or_package
```
–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π —Ñ—Ä–∞–≥–º–µ–Ω—Ç `pyproject.toml` (–∂—ë—Å—Ç–∫–∏–π —Ä–µ–∂–∏–º):
```toml
[tool.mypy]
python_version = "3.11"
strict = true
no_implicit_optional = true
warn_unused_ignores = true
warn_redundant_casts = true
disallow_untyped_defs = true
check_untyped_defs = true
warn_unreachable = true
```
–ß–∞—Å—Ç—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∏ —á—Ç–æ –æ–Ω–∏ –∑–Ω–∞—á–∞—Ç:
- **Missing return statement** ‚Äî –Ω–µ –≤—Å–µ –≤–µ—Ç–≤–∏ —Ñ—É–Ω–∫—Ü–∏–∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç –∑–Ω–∞—á–µ–Ω–∏–µ.
- **Incompatible types** ‚Äî –ø–æ–ø—ã—Ç–∫–∞ –ø—Ä–∏—Å–≤–æ–µ–Ω–∏—è/–≤–æ–∑–≤—Ä–∞—Ç–∞ –Ω–µ–≤–µ—Ä–Ω–æ–≥–æ —Ç–∏–ø–∞.
- **Item of type "None" ...** ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ—à—å –∑–Ω–∞—á–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –º–æ–∂–µ—Ç –±—ã—Ç—å `None`.
- **Unsupported operand types** ‚Äî –æ–ø–µ—Ä–∞—Ü–∏–∏ –º–µ–∂–¥—É –Ω–µ—Å–æ–≤–º–µ—Å—Ç–∏–º—ã–º–∏ —Ç–∏–ø–∞–º–∏.

–ò–∑–±–∏—Ä–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–¥–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∏ –¥–æ–ø—É—Å—Ç–∏–º–æ —Ç–æ–ª—å–∫–æ —Å –ø–æ—è—Å–Ω–µ–Ω–∏–µ–º:
```python
value = get_third_party_value()  # type: ignore[no-redef]  # –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –∞–Ω–Ω–æ—Ç–∏—Ä–æ–≤–∞–Ω–∞ –Ω–µ–≤–µ—Ä–Ω–æ
```

---

### 10. Pytest: –æ—Å–Ω–æ–≤—ã –∏ —Ñ–∏–∫—Å—Ç—É—Ä—ã
–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫:
```bash
pip install pytest
pytest -q
```
–°—Ç—Ä—É–∫—Ç—É—Ä–∞:
```
project/
‚îú‚îÄ package_or_module/
‚îî‚îÄ tests/
   ‚îú‚îÄ test_feature_a.py
   ‚îî‚îÄ test_feature_b.py
```
**–ü–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–∞—Ü–∏—è:**
```python
import pytest

@pytest.mark.parametrize("x,y,expected", [(2,3,5), (-1,1,0), (0,0,0)])
def test_add(x, y, expected):
    assert x + y == expected
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–π:**
```python
import pytest

def div(a: int, b: int) -> float:
    if b == 0:
        raise ZeroDivisionError("Division by zero")
    return a / b

def test_div_by_zero():
    with pytest.raises(ZeroDivisionError, match="Division by zero"):
        div(1, 0)
```

**–ü–æ–ª–µ–∑–Ω—ã–µ —Ñ–∏–∫—Å—Ç—É—Ä—ã:**
- `tmp_path` ‚Äî –≤—Ä–µ–º–µ–Ω–Ω—ã–π –∫–∞—Ç–∞–ª–æ–≥ Path –¥–ª—è —Ñ–∞–π–ª–æ–≤—ã—Ö —Ç–µ—Å—Ç–æ–≤.
- `monkeypatch` ‚Äî –ø–æ–¥–º–µ–Ω–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è/–∞—Ç—Ä–∏–±—É—Ç–æ–≤.
- `capsys` ‚Äî –ø–µ—Ä–µ—Ö–≤–∞—Ç stdout/stderr.

–ü—Ä–∏–º–µ—Ä—ã:
```python
# tmp_path
def test_tmp_path(tmp_path):
    p = tmp_path / "x.txt"
    p.write_text("hello")
    assert p.read_text() == "hello"

# monkeypatch
def test_env(monkeypatch):
    import os
    monkeypatch.setenv("APP_MODE", "test")
    assert os.getenv("APP_MODE") == "test"

# capsys
def hello(): print("hi")
def test_capsys(capsys):
    hello()
    out = capsys.readouterr().out.strip()
    assert out == "hi"
```

**conftest.py** ‚Äî –º–µ—Å—Ç–æ –¥–ª—è –æ–±—â–∏—Ö —Ñ–∏–∫—Å—Ç—É—Ä, –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –≤—Å–µ–º —Ç–µ—Å—Ç–∞–º –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏.

---

### 11. –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π —Ä–∞–±–æ—á–∏–π –ø—Ä–æ—Ü–µ—Å—Å (–º–∏–∫—Ä–æ-—Ü–∏–∫–ª)
1) –ü–∏—à–µ–º —Ñ—É–Ω–∫—Ü–∏—é —Å –∞–Ω–Ω–æ—Ç–∞—Ü–∏—è–º–∏.
2) –°—Ä–∞–∑—É –ø–∏—à–µ–º —Ç–µ—Å—Ç(—ã) (–≤ —Ç.—á. –Ω–µ–≥–∞—Ç–∏–≤–Ω—ã–µ –∫–µ–π—Å—ã).
3) –ü—Ä–æ–≥–æ–Ω—è–µ–º `mypy --strict`.
4) –ü—Ä–æ–≥–æ–Ω—è–µ–º `pytest`.
5) –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–º –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∏ –ø–æ–≤—Ç–æ—Ä—è–µ–º —Ü–∏–∫–ª.

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–æ–¥—É–ª—è
```
M01_Basic_Python/
‚îî‚îÄ 09_typing_pytest/
   ‚îú‚îÄ data/
      ‚îú‚îÄ output.txt
      ‚îú‚îÄ text.txt
   ‚îú‚îÄ tasks/
   ‚îÇ  ‚îú‚îÄ __init__.py
   ‚îÇ  ‚îú‚îÄ task01_normalize.py
   ‚îÇ  ‚îú‚îÄ task02_word_counts.py
   ‚îÇ  ‚îú‚îÄ task03_shift.py
   ‚îÇ  ‚îú‚îÄ task04_to_int.py
   ‚îÇ  ‚îú‚îÄ task05_apply_all.py
   ‚îÇ  ‚îú‚îÄ task06_mean.py
   ‚îÇ  ‚îú‚îÄ task07_filter_keep.py
   ‚îÇ  ‚îú‚îÄ task08_group_by.py
   ‚îÇ  ‚îú‚îÄ task09_user_typedict.py
   ‚îÇ  ‚îú‚îÄ task10_point_namedtuple.py
   ‚îÇ  ‚îú‚îÄ task11_note_dataclass.py        # (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
   ‚îÇ  ‚îú‚îÄ task12_p2_dataclass.py          # (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
   ‚îÇ  ‚îú‚îÄ task13_missing_return.py
   ‚îÇ  ‚îú‚îÄ task14_optional_leak.py
   ‚îÇ  ‚îú‚îÄ task15_save_lines.py
   ‚îÇ  ‚îú‚îÄ task16_read_mode.py
   ‚îÇ  ‚îú‚îÄ task17_hello_capsys.py
   ‚îÇ  ‚îú‚îÄ task18_inverse.py
   ‚îÇ  ‚îú‚îÄ task19_config_validate.py
   ‚îÇ  ‚îî‚îÄ task20_map_strict.py
   ‚îú‚îÄ tests/
   ‚îÇ  ‚îú‚îÄ conftest.py
   ‚îÇ  ‚îú‚îÄ test_task01_normalize.py
   ‚îÇ  ‚îú‚îÄ test_task02_word_counts.py
   ‚îÇ  ‚îú‚îÄ test_task03_shift.py
   ‚îÇ  ‚îú‚îÄ test_task04_to_int.py
   ‚îÇ  ‚îú‚îÄ test_task05_apply_all.py
   ‚îÇ  ‚îú‚îÄ test_task06_mean.py
   ‚îÇ  ‚îú‚îÄ test_task07_filter_keep.py
   ‚îÇ  ‚îú‚îÄ test_task08_group_by.py
   ‚îÇ  ‚îú‚îÄ test_task09_user_typedict.py
   ‚îÇ  ‚îú‚îÄ test_task10_point_namedtuple.py
   ‚îÇ  ‚îú‚îÄ test_task11_note_dataclass.py   # (–æ–ø—Ü.)
   ‚îÇ  ‚îú‚îÄ test_task12_p2_dataclass.py     # (–æ–ø—Ü.)
   ‚îÇ  ‚îú‚îÄ test_task13_missing_return.py
   ‚îÇ  ‚îú‚îÄ test_task14_optional_leak.py
   ‚îÇ  ‚îú‚îÄ test_task15_save_lines.py
   ‚îÇ  ‚îú‚îÄ test_task16_read_mode.py
   ‚îÇ  ‚îú‚îÄ test_task17_hello_capsys.py
   ‚îÇ  ‚îú‚îÄ test_task18_inverse.py
   ‚îÇ  ‚îú‚îÄ test_task19_config_validate.py
   ‚îÇ  ‚îî‚îÄ test_task20_map_strict.py
   ‚îî‚îÄ pyproject.toml
```

---

## üß© –ó–∞–¥–∞–Ω–∏—è

**Task 01 ‚Äî –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è —Å—Ç—Ä–æ–∫**
**–§–∞–π–ª:** `task01_normalize.py`
**–ó–∞–¥–∞—á–∞:** `normalize(words: list[str]) -> list[str]` ‚Äî —É–¥–∞–ª–∏—Ç—å –ø—É—Å—Ç—ã–µ/–ø—Ä–æ–±–µ–ª—å–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã –∏ –ø—Ä–∏–≤–µ—Å—Ç–∏ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –∫ `strip().lower()`.
**–ö—Ä–∞–µ–≤—ã–µ —Å–ª—É—á–∞–∏:** `[" ", "", "Hi", "  PY  "] ‚Üí ["hi","py"]`.
**–ü–æ–¥—Å–∫–∞–∑–∫–∏:** `str.strip()`, —Å–ø–∏—Å–∫–æ–≤–æ–µ –≤–∫–ª—é—á–µ–Ω–∏–µ.
**–ü—Ä–æ–≤–µ—Ä–∫–∞:** `mypy --strict`, –ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π —Ç–µ—Å—Ç.

**Task 02 ‚Äî –ß–∞—Å—Ç–æ—Ç—ã —Å–ª–æ–≤**
**–§–∞–π–ª:** `task02_word_counts.py`
**–ó–∞–¥–∞—á–∞:** `word_counts(text: str) -> dict[str, int]` ‚Äî —Ä–∞–∑–¥–µ–ª–∏—Ç—å –ø–æ –ø—Ä–æ–±–µ–ª–∞–º, –ø–æ—Å—á–∏—Ç–∞—Ç—å —á–∞—Å—Ç–æ—Ç—ã, –∏–≥–Ω–æ—Ä–∏—Ä—É—è –ø—É—Å—Ç—ã–µ —Ç–æ–∫–µ–Ω—ã.
**–ü–æ–¥—Å–∫–∞–∑–∫–∏:** `split()`, `dict.get(k,0)`, –¥–æ–ø—É—Å–∫–∞–µ—Ç—Å—è `Counter` —Å –≤–æ–∑–≤—Ä–∞—Ç–æ–º `dict[str,int]`.

**Task 03 ‚Äî –°–¥–≤–∏–≥ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç (Tuple/List)**
**–§–∞–π–ª:** `task03_shift.py`
**–ó–∞–¥–∞—á–∞:** `shift(points: list[tuple[int,int]], dx: int, dy: int) -> list[tuple[int,int]]` ‚Äî —Å–º–µ—Å—Ç–∏—Ç—å –∫–∞–∂–¥—É—é —Ç–æ—á–∫—É –Ω–∞ `(dx, dy)`.

**Task 04 ‚Äî –ë–µ–∑–æ–ø–∞—Å–Ω—ã–π –ø–∞—Ä—Å–∏–Ω–≥ int (Optional)**
**–§–∞–π–ª:** `task04_to_int.py`
**–ó–∞–¥–∞—á–∞:** `to_int(s: str) -> int | None` ‚Äî –≤–µ—Ä–Ω—É—Ç—å `None`, –µ—Å–ª–∏ –ø–∞—Ä—Å–∏–Ω–≥ –Ω–µ–≤–æ–∑–º–æ–∂–µ–Ω.
**–ü–æ–¥—Å–∫–∞–∑–∫–∏:** `try/except ValueError`, `strip()`.

**Task 05 ‚Äî –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —Ñ—É–Ω–∫—Ü–∏–π (Callable)**
**–§–∞–π–ª:** `task05_apply_all.py`
**–ó–∞–¥–∞—á–∞:** `apply_all(x: int, y: int, funcs: list[Callable[[int,int], int]]) -> list[int]` ‚Äî –≤–µ—Ä–Ω—É—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏–π.
**–ü–æ–¥—Å–∫–∞–∑–∫–∏:** `type alias` –¥–ª—è —Å–∏–≥–Ω–∞—Ç—É—Ä—ã.

**Task 06 ‚Äî –°—Ä–µ–¥–Ω–µ–µ –ø–æ —Å–º–µ—à–∞–Ω–Ω–æ–º—É —Å–ø–∏—Å–∫—É (Union)**
**–§–∞–π–ª:** `task06_mean.py`
**–ó–∞–¥–∞—á–∞:** `mean(xs: list[int|float]) -> float | None` ‚Äî –≤–µ—Ä–Ω—É—Ç—å —Å—Ä–µ–¥–Ω–µ–µ –∏–ª–∏ `None` –¥–ª—è –ø—É—Å—Ç–æ–≥–æ —Å–ø–∏—Å–∫–∞.

**Task 07 ‚Äî –î–∂–µ–Ω–µ—Ä–∏–∫-—Ñ–∏–ª—å—Ç—Ä (TypeVar + Callable)**
**–§–∞–π–ª:** `task07_filter_keep.py`
**–ó–∞–¥–∞—á–∞:** `filter_keep(xs: list[T], pred: Callable[[T], bool]) -> list[T]` ‚Äî —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ç–∏–ø `T` –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ.

**Task 08 ‚Äî –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ –∫–ª—é—á—É (–¥–∂–µ–Ω–µ—Ä–∏–∫–∏)**
**–§–∞–π–ª:** `task08_group_by.py`
**–ó–∞–¥–∞—á–∞:** `group_by(xs: list[T], key: Callable[[T], K]) -> dict[K, list[T]]` (K ‚Äî —Ö—ç—à–∏—Ä—É–µ–º—ã–π).

**Task 09 ‚Äî –°—Ö–µ–º–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (TypedDict)**
**–§–∞–π–ª:** `task09_user_typedict.py`
**–ó–∞–¥–∞—á–∞:** –æ–ø–∏—Å–∞—Ç—å `UserTD` –∏ —Ñ—É–Ω–∫—Ü–∏—é `user_has_tag(user: UserTD, tag: str) -> bool`.

**Task 10 ‚Äî `NamedTuple` –∏ –¥–ª–∏–Ω–∞ –≤–µ–∫—Ç–æ—Ä–∞**
**–§–∞–π–ª:** `task10_point_namedtuple.py`
**–ó–∞–¥–∞—á–∞:** `Point2D(NamedTuple)` –∏ `length(p: Point2D) -> float` (–∏—Å–ø–æ–ª—å–∑—É–π `math.hypot`).

**Task 11 ‚Äî –¢–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∑–∞–º–µ—Ç–∫–∞ (dataclass, –æ–ø—Ü.)**
**–§–∞–π–ª:** `task11_note_dataclass.py`
**–ó–∞–¥–∞—á–∞:** `Note` (frozen) –∏ `has_any_tag(n: Note, wanted: set[str]) -> bool`.

**Task 12 ‚Äî –ü–µ—Ä–µ–Ω–æ—Å —Ç–æ—á–µ–∫ (dataclass, –æ–ø—Ü.)**
**–§–∞–π–ª:** `task12_p2_dataclass.py`
**–ó–∞–¥–∞—á–∞:** `P2 (frozen)` –∏ `translate(ps: list[P2], dx: int, dy: int) -> list[P2]` –±–µ–∑ –º—É—Ç–∞—Ü–∏–π.

**Task 13 ‚Äî Missing return (mypy —Å—Ç—Ä–æ–≥–∏–π)**
**–§–∞–π–ª:** `task13_missing_return.py`
**–ó–∞–¥–∞—á–∞:** –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏ –∏ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –æ—à–∏–±–∫—É ¬´Missing return statement¬ª –≤ `--strict` —Ä–µ–∂–∏–º–µ.

**Task 14 ‚Äî Optional-–ø—Ä–æ—Ç–µ—á–∫–∞**
**–§–∞–π–ª:** `task14_optional_leak.py`
**–ó–∞–¥–∞—á–∞:** –ø–æ–∫–∞–∑–∞—Ç—å, –∫–∞–∫ `mypy` –ª–æ–≤–∏—Ç –æ–ø–µ—Ä–∞—Ü–∏–∏ –Ω–∞–¥ `None`; –∑–∞—Ç–µ–º –∏—Å–ø—Ä–∞–≤–∏—Ç—å —á–µ—Ä–µ–∑ —è–≤–Ω—É—é –ø—Ä–æ–≤–µ—Ä–∫—É.

**Task 15 ‚Äî –§–∞–π–ª–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å `tmp_path`**
**–§–∞–π–ª:** `task15_save_lines.py`
**–ó–∞–¥–∞—á–∞:** `save_lines(path: Path, lines: list[str]) -> None` ‚Äî –∑–∞–ø–∏—Å–∞—Ç—å —Å—Ç—Ä–æ–∫–∏ –ø–æ—Å—Ç—Ä–æ—á–Ω–æ.

**Task 16 ‚Äî –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (`monkeypatch`)**
**–§–∞–π–ª:** `task16_read_mode.py`
**–ó–∞–¥–∞—á–∞:** `read_mode() -> str` —á–∏—Ç–∞–µ—Ç `os.getenv("APP_MODE", "prod")`.

**Task 17 ‚Äî –ü–µ—Ä–µ—Ö–≤–∞—Ç stdout (`capsys`)**
**–§–∞–π–ª:** `task17_hello_capsys.py`
**–ó–∞–¥–∞—á–∞:** `hello() -> None` –ø–µ—á–∞—Ç–∞–µ—Ç `"hi"` –±–µ–∑ –ª–∏—à–Ω–∏—Ö —Å–∏–º–≤–æ–ª–æ–≤.

**Task 18 ‚Äî –ò—Å–∫–ª—é—á–µ–Ω–∏—è –∏ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ**
**–§–∞–π–ª:** `task18_inverse.py`
**–ó–∞–¥–∞—á–∞:** `inverse(x: float) -> float` –∫–∏–¥–∞–µ—Ç `ZeroDivisionError` –ø—Ä–∏ `0.0` (—Å –ø–æ–Ω—è—Ç–Ω—ã–º —Ç–µ–∫—Å—Ç–æ–º).

**Task 19 ‚Äî –í–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ (TypedDict)**
**–§–∞–π–ª:** `task19_config_validate.py`
**–ó–∞–¥–∞—á–∞:** `Config(TypedDict)` –∏ `validate(cfg: dict[str, object]) -> Config | None`.

**Task 20 ‚Äî –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π map (–¥–∂–µ–Ω–µ—Ä–∏–∫–∏)**
**–§–∞–π–ª:** `task20_map_strict.py`
**–ó–∞–¥–∞—á–∞:** `map_strict(xs: list[T], f: Callable[[T], U]) -> list[U]`.

---

## ‚ñ∂Ô∏è –ö–∞–∫ –∑–∞–ø—É—Å–∫–∞—Ç—å

1) –ê–∫—Ç–∏–≤–∏—Ä—É–π –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ –∏ —É—Å—Ç–∞–Ω–æ–≤–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
```bash
pip install mypy pytest
```
> –°—Ç–∞–≤–∏–º **—Ç–æ–ª—å–∫–æ –≤ .venv**, –∞ –Ω–µ –≥–ª–æ–±–∞–ª—å–Ω–æ.

2) –ó–∞–ø—É—Å—Ç–∏ —Å—Ç–∞—Ç–∏—á–µ—Å–∫—É—é –ø—Ä–æ–≤–µ—Ä–∫—É —Ç–∏–ø–æ–≤ –∏ —Ç–µ—Å—Ç—ã –∏–∑ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –º–æ–¥—É–ª—è:
```bash
mypy .
pytest -q
```

3) (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –¥–æ–±–∞–≤—å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π `pyproject.toml` —Ä—è–¥–æ–º —Å –º–æ–¥—É–ª–µ–º –∏–ª–∏ –≤ –∫–æ—Ä–Ω–µ —Ä–µ–ø–æ:
```toml
[tool.mypy]
python_version = "3.11"
strict = true
no_implicit_optional = true
warn_unused_ignores = true
warn_redundant_casts = true
disallow_untyped_defs = true
check_untyped_defs = true
warn_unreachable = true

[tool.pytest.ini_options]
addopts = "-q"
testpaths = ["M01_Basic_Python/09_typing_pytest/tests"]
```

---

## ‚úÖ –ö—Ä–∏—Ç–µ—Ä–∏–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏
- [x] –í—Å–µ 20 –∑–∞–¥–∞—á —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –±–µ–∑ ¬´–∑–∞–≥–ª—É—à–µ–∫¬ª –∏ —Å –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º–∏ –∞–Ω–Ω–æ—Ç–∞—Ü–∏—è–º–∏ —Ç–∏–ø–æ–≤.
- [x] –î–ª—è –∫–∞–∂–¥–æ–π –∑–∞–¥–∞—á–∏ –µ—Å—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ç–µ—Å—Ç-—Ñ–∞–π–ª —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–∞—Ü–∏–µ–π (–≥–¥–µ —É–º–µ—Å—Ç–Ω–æ).
- [x] `mypy . --strict` –ø—Ä–æ—Ö–æ–¥–∏—Ç –±–µ–∑ –æ—à–∏–±–æ–∫ –∏ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π.
- [x] `pytest` –ø–æ–ª–Ω–æ—Å—Ç—å—é –∑–µ–ª—ë–Ω—ã–π; —Ç–µ—Å—Ç—ã –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω—ã, —Ñ–∞–π–ª–æ–≤—ã–µ ‚Äî —á–µ—Ä–µ–∑ `tmp_path`.
- [x] –ù–µ—Ç –æ–±—â–∏—Ö –º—É—Ç–∏—Ä—É–µ–º—ã—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–π –º–µ–∂–¥—É —Ç–µ—Å—Ç–∞–º–∏; –æ–∫—Ä—É–∂–µ–Ω–∏–µ ‚Äî —á–µ—Ä–µ–∑ `monkeypatch`.
- [x] –î–æ–∫—Å—Ç—Ä–∏–Ω–≥–∏ –∏ –Ω–µ–π–º–∏–Ω–≥ —Ñ—É–Ω–∫—Ü–∏–π/–ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –ø–æ–Ω—è—Ç–Ω—ã –∏ –µ–¥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω—ã.

---

## üõü –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫
- **`mypy: Missing return statement`** ‚Äî –ø—Ä–æ–≤–µ—Ä—å –≤—Å–µ –≤–µ—Ç–≤–∏ `if/elif/else`, —É–±–µ–¥–∏—Å—å, —á—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –≤–µ–∑–¥–µ.
- **`Item of type "None" is not iterable / unsupported operand ...`** ‚Äî –¥–æ–±–∞–≤—å —è–≤–Ω—É—é –ø—Ä–æ–≤–µ—Ä–∫—É –Ω–∞ `None` –¥–æ –æ–ø–µ—Ä–∞—Ü–∏–π.
- **–°–º–µ—à–µ–Ω–∏–µ —Ç–∏–ø–æ–≤ `int`/`str`** ‚Äî –∏—Å–ø–æ–ª—å–∑—É–π —è–≤–Ω—ã–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è, –¥–æ–±–∞–≤–ª—è–π –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏ –∫ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º.
- **–¢–µ—Å—Ç—ã –∑–∞–≤–∏—Å—è—Ç –æ—Ç –ø–æ—Ä—è–¥–∫–∞/—Å–æ—Å—Ç–æ—è–Ω–∏—è** ‚Äî –≤—ã–Ω–æ—Å–∏ –ø–æ–¥–≥–æ—Ç–æ–≤–∫—É –≤ —Ñ–∏–∫—Å—Ç—É—Ä—ã; –Ω–µ –º—É—Ç–∏—Ä—É–π –≤—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤–Ω—É—Ç—Ä–∏ —Ñ—É–Ω–∫—Ü–∏–π.
- **–§–∞–π–ª–æ–≤—ã–µ –ø—É—Ç–∏** ‚Äî –≤—Å–µ–≥–¥–∞ —Ä–∞–±–æ—Ç–∞–π —á–µ—Ä–µ–∑ `tmp_path` –≤ —Ç–µ—Å—Ç–∞—Ö; –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–π —Ä–µ–∞–ª—å–Ω—ã–µ —Ä–∞–±–æ—á–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏.
- **–ì–ª–æ–±–∞–ª—å–Ω—ã–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø–∞–∫–µ—Ç–æ–≤** ‚Äî –¥–µ—Ä–∂–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –≤ `.venv`, —Ñ–∏–∫—Å–∏—Ä—É–π –∏—Ö –≤ –ø—Ä–æ–µ–∫—Ç–µ (requirements/pyproject).
- **Windows/CRLF** ‚Äî –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è —Ç–µ–∫—Å—Ç–æ–≤ –≤ —Ç–µ—Å—Ç–∞—Ö –∏—Å–ø–æ–ª—å–∑—É–π `.splitlines()` –≤–º–µ—Å—Ç–æ –∂—ë—Å—Ç–∫–∏—Ö `\n`.
