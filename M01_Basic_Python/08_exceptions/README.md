# M1.8 ‚Äî –ò—Å–∫–ª—é—á–µ–Ω–∏—è
–í —ç—Ç–æ–º –º–æ–¥—É–ª–µ —Ç—ã –æ—Å–≤–æ–∏—à—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫ –≤ Python: –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ `try/except/else/finally`, —Å–æ–∑–¥–∞–Ω–∏–µ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∏—Å–∫–ª—é—á–µ–Ω–∏–π, –ø—Ä–æ–±—Ä–æ—Å –∏ –ø–æ–¥–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–æ–∫.

---

## üéØ –ß—Ç–æ —Ç—ã –æ—Å–≤–æ–∏—à—å
- –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –æ—à–∏–±–∫–∏ —Å –ø–æ–º–æ—â—å—é `try/except/else/finally`
- –°–æ–∑–¥–∞–≤–∞—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ –∫–ª–∞—Å—Å—ã –∏—Å–∫–ª—é—á–µ–Ω–∏–π
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–æ–±—Ä–æ—Å (`raise`) –∏ —Ü–µ–ø–æ—á–∫–∏ –∏—Å–∫–ª—é—á–µ–Ω–∏–π (`raise ... from ...`)
- –ü—Ä–∏–º–µ–Ω—è—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–µ –º–µ–Ω–µ–¥–∂–µ—Ä—ã –∏ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—é `with` –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–π —Ä–∞–±–æ—Ç—ã —Å —Ä–µ—Å—É—Ä—Å–∞–º–∏
- –ü–æ–¥–∞–≤–ª—è—Ç—å –æ–∂–∏–¥–∞–µ–º—ã–µ –æ—à–∏–±–∫–∏ —Å –ø–æ–º–æ—â—å—é `contextlib.suppress`
- –ü—Ä–∏–º–µ–Ω—è—Ç—å best practices –¥–ª—è ¬´—á–µ–ª–æ–≤–µ—á–Ω–æ–≥–æ¬ª –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º

---

## üìò –ü–æ–ª–Ω–∞—è —Ç–µ–æ—Ä–∏—è

### 1. –û—Å–Ω–æ–≤—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫
–í Python –æ—à–∏–±–∫–∏ (–∏—Å–∫–ª—é—á–µ–Ω–∏—è) –≤—ã–±—Ä–∞—Å—ã–≤–∞—é—Ç—Å—è, –∫–æ–≥–¥–∞ —á—Ç–æ-—Ç–æ –∏–¥—ë—Ç –Ω–µ —Ç–∞–∫. –ß—Ç–æ–±—ã –ø—Ä–æ–≥—Ä–∞–º–º–∞ –Ω–µ –ø–∞–¥–∞–ª–∞, –º—ã –º–æ–∂–µ–º –∏—Ö –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å.

```python
try:
    number = int(input("Enter number: "))
except ValueError:
    print("–í—ã –≤–≤–µ–ª–∏ –Ω–µ —á–∏—Å–ª–æ!")
```

üîπ `try` ‚Äî –±–ª–æ–∫ –∫–æ–¥–∞, –≥–¥–µ –º–æ–∂–µ—Ç –ø—Ä–æ–∏–∑–æ–π—Ç–∏ –æ—à–∏–±–∫–∞
üîπ `except` ‚Äî –ø–µ—Ä–µ—Ö–≤–∞—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –æ—à–∏–±–∫–∏
üîπ `else` ‚Äî –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è, –µ—Å–ª–∏ –æ—à–∏–±–æ–∫ –Ω–µ –±—ã–ª–æ
üîπ `finally` ‚Äî –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤—Å–µ–≥–¥–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∑–∞–∫—Ä—ã—Ç–∏–µ —Ñ–∞–π–ª–æ–≤ –∏–ª–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π)

```python
try:
    f = open("data.txt")
    data = f.read()
except FileNotFoundError:
    print("–§–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω")
else:
    print("–§–∞–π–ª —É—Å–ø–µ—à–Ω–æ –ø—Ä–æ—á–∏—Ç–∞–Ω")
finally:
    f.close()
```

---

### 2. –°–æ–∑–¥–∞–Ω–∏–µ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∏—Å–∫–ª—é—á–µ–Ω–∏–π
–ú—ã –º–æ–∂–µ–º –æ–ø–∏—Å—ã–≤–∞—Ç—å —Å–≤–æ–∏ –æ—à–∏–±–∫–∏, —á—Ç–æ–±—ã –∫–æ–¥ –±—ã–ª –ø–æ–Ω—è—Ç–Ω–µ–µ:

```python
class NegativeNumberError(Exception):
    """–û—à–∏–±–∫–∞: —á–∏—Å–ª–æ –º–µ–Ω—å—à–µ –Ω—É–ª—è."""
    pass
```

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:

```python
def sqrt_strict(x: int) -> float:
    if x < 0:
        raise NegativeNumberError("–ù–µ–ª—å–∑—è –∏–∑–≤–ª–µ–∫–∞—Ç—å –∫–æ—Ä–µ–Ω—å –∏–∑ –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–≥–æ —á–∏—Å–ª–∞")
    return x ** 0.5
```

---

### 3. –ü—Ä–æ–±—Ä–æ—Å –∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–µ –≤—ã–±—Ä–∞—Å—ã–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫
–ï—Å–ª–∏ —Ñ—É–Ω–∫—Ü–∏—è –Ω–µ –º–æ–∂–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –æ—à–∏–±–∫—É —Å–∞–º–∞, –µ—ë –Ω—É–∂–Ω–æ –ø—Ä–æ–±—Ä–æ—Å–∏—Ç—å –¥–∞–ª—å—à–µ.

```python
def parse_number(s: str) -> int:
    try:
        return int(s)
    except ValueError as e:
        print(f"–û—à–∏–±–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞: {e}")
        raise   # –ø—Ä–æ–±—Ä–æ—Å –æ—à–∏–±–∫–∏ –≤—ã—à–µ
```

–í—ã–∑–æ–≤ –≤ `main` –º–æ–∂–µ—Ç –ø–æ–π–º–∞—Ç—å —ç—Ç—É –∂–µ –æ—à–∏–±–∫—É:
```python
try:
    num = parse_number("abc")
except ValueError:
    print("–í–≤–µ–¥–µ–Ω–æ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ —á–∏—Å–ª–æ")
```

---

### 4. –¶–µ–ø–æ—á–∫–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–π (`raise ... from e`)
–ò–Ω–æ–≥–¥–∞ –º—ã —Ö–æ—Ç–∏–º –∑–∞–º–µ–Ω–∏—Ç—å –æ—à–∏–±–∫—É –Ω–∞ —Å–≤–æ—é, –Ω–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø—Ä–∏—á–∏–Ω—É:

```python
class ParseError(Exception):
    pass

def parse_int(s: str) -> int:
    try:
        return int(s)
    except ValueError as e:
        raise ParseError(f"–ù–µ —É–¥–∞–ª–æ—Å—å –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å '{s}' –≤ —á–∏—Å–ª–æ") from e
```

–í—ã–≤–æ–¥ –ø–æ–∫–∞–∂–µ—Ç —Å–Ω–∞—á–∞–ª–∞ `ValueError`, –∞ –∑–∞—Ç–µ–º `ParseError` –∫–∞–∫ ¬´–ø—Ä–∏—á–∏–Ω—ë–Ω–Ω—É—é¬ª –æ—à–∏–±–∫—É.

---

### 5. `finally` –∏ `with open`
`finally` —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –¥–ª—è –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤:

```python
f = None
try:
    f = open("data.txt")
    data = f.read()
finally:
    if f is not None:
        f.close()
```

–ù–æ –ª—É—á—à–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `with`, –∫–æ—Ç–æ—Ä—ã–π —Å–∞–º –∑–∞–∫—Ä—ã–≤–∞–µ—Ç —Ä–µ—Å—É—Ä—Å:

```python
with open("data.txt") as f:
    data = f.read()
```

---

### 6. –ü–æ–¥–∞–≤–ª–µ–Ω–∏–µ –æ–∂–∏–¥–∞–µ–º—ã—Ö –æ—à–∏–±–æ–∫
–ï—Å–ª–∏ –æ—à–∏–±–∫–∞ –æ–∂–∏–¥–∞–µ–º–∞ –∏ –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–∞–ø–∫–∞ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç), –º–æ–∂–Ω–æ –µ—ë ¬´–ø–æ–¥–∞–≤–∏—Ç—å¬ª:

```python
from contextlib import suppress
import os

with suppress(FileExistsError):
    os.mkdir("data/testdir")
```

---

### 7. –ü–æ–≤—Ç–æ—Ä–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏ (retry, backoff)
–ò–Ω–æ–≥–¥–∞ –Ω—É–∂–Ω–æ –ø–æ–≤—Ç–æ—Ä—è—Ç—å –æ–ø–µ—Ä–∞—Ü–∏—é —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π, –µ—Å–ª–∏ –æ–Ω–∞ –ø–∞–¥–∞–µ—Ç:

```python
import time, random

def unstable():
    if random.random() < 0.5:
        raise RuntimeError("–°–±–æ–π")
    return "–£—Å–ø–µ—Ö"

def retry(fn, attempts=3, base_delay=0.5):
    for i in range(attempts):
        try:
            return fn()
        except RuntimeError as e:
            if i == attempts - 1:
                raise
            delay = base_delay * (2 ** i)
            print(f"–û—à–∏–±–∫–∞: {e}, –∂–¥—ë–º {delay} —Å–µ–∫—É–Ω–¥...")
            time.sleep(delay)
```

---

### 8. Best practices
- –õ–æ–≤–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –æ—à–∏–±–∫–∏ (`ValueError`, `FileNotFoundError`), –∞ –Ω–µ `except Exception`.
- –ò—Å–ø–æ–ª—å–∑—É–π `with` –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ñ–∞–π–ª–∞–º–∏ –∏ —Ä–µ—Å—É—Ä—Å–∞–º–∏.
- –ù–µ –≥–∞—Å–∏ –≤—Å–µ –æ—à–∏–±–∫–∏ –±–µ–∑ —Ä–∞–∑–±–æ—Ä–∞ (`suppress(Exception)` ‚Äî –ø–ª–æ—Ö–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞).
- –ò—Å–ø–æ–ª—å–∑—É–π –∫–∞—Å—Ç–æ–º–Ω—ã–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è –¥–ª—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏.
- –î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –æ—à–∏–±–∫–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –¥—Ä—É–∂–µ–ª—é–±–Ω—ã–º–∏, –∞ –¥–ª—è –ª–æ–≥–æ–≤ ‚Äî –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–º–∏.
- –î–µ—Ä–∂–∏ `try` –±–ª–æ–∫–∏ –∫–∞–∫ –º–æ–∂–Ω–æ –∫–æ—Ä–æ—á–µ.

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–æ–¥—É–ª—è
```
08_exceptions/
‚îú‚îÄ‚îÄ data/
‚îÇ   ‚îú‚îÄ‚îÄ test_dir
‚îÇ   ‚îú‚îÄ‚îÄ config.json
‚îÇ   ‚îú‚îÄ‚îÄ missing.txt
‚îÇ   ‚îú‚îÄ‚îÄ prices.csv
‚îÇ   ‚îú‚îÄ‚îÄ raw.txt
‚îÇ   ‚îî‚îÄ‚îÄ text.txt
‚îú‚îÄ‚îÄ task01_safe_input.py
‚îú‚îÄ‚îÄ task02_division.py
‚îú‚îÄ‚îÄ task03_file_read.py
‚îú‚îÄ‚îÄ task04_custom_exception.py
‚îú‚îÄ‚îÄ task05_config_validate.py
‚îú‚îÄ‚îÄ task06_normalize_prices.py
‚îú‚îÄ‚îÄ task07_reraise.py
‚îú‚îÄ‚îÄ task08_retry_backoff.py
‚îú‚îÄ‚îÄ task09_safe_file.py
‚îú‚îÄ‚îÄ task10_exception_chain.py
‚îú‚îÄ‚îÄ task11_suppress.py
‚îî‚îÄ‚îÄ task12_console_calc.py
```

---

## üß© –ó–∞–¥–∞–Ω–∏—è
1. **–ë–µ–∑–æ–ø–∞—Å–Ω—ã–π –≤–≤–æ–¥ —á–∏—Å–ª–∞** ‚Äî –æ–±—Ä–∞–±–æ—Ç–∫–∞ `ValueError`
2. **–î–µ–ª–µ–Ω–∏–µ —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –Ω—É–ª—è** ‚Äî –ø–µ—Ä–µ—Ö–≤–∞—Ç `ZeroDivisionError`
3. **–ß—Ç–µ–Ω–∏–µ —Ñ–∞–π–ª–∞ —Å `else/finally`** ‚Äî —É—á–∏–º—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∑–∞–∫—Ä—ã–≤–∞—Ç—å —Ä–µ—Å—É—Ä—Å—ã
4. **–°–≤–æ—ë –∏—Å–∫–ª—é—á–µ–Ω–∏–µ `NegativeNumberError`** ‚Äî –∫–∞—Å—Ç–æ–º–Ω—ã–µ –∫–ª–∞—Å—Å—ã –æ—à–∏–±–æ–∫
5. **–í–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ JSON** ‚Äî `ConfigValidationError`
6. **–ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è —Å–ø–∏—Å–∫–∞ —Ü–µ–Ω (CSV)** ‚Äî `DataFormatError` –∏ `DataQualityError`
7. **–ü—Ä–æ–±—Ä–æ—Å –∏—Å–∫–ª—é—á–µ–Ω–∏–π (re-raise)** ‚Äî –ª–æ–≥–∏—Ä—É–µ–º –∏ –ø–µ—Ä–µ–¥–∞—ë–º –≤—ã—à–µ
8. **–†–µ—Ç—Ä–∞–∏ —Å backoff** ‚Äî –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏ –ø—Ä–∏ —Å–±–æ—è—Ö
9. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ –æ—Ç–∫—Ä—ã—Ç–∏–µ —Ñ–∞–π–ª–∞** ‚Äî `try/except/finally`
10. **–¶–µ–ø–æ—á–∫–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–π** ‚Äî `raise ... from e`
11. **–ü–æ–¥–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–æ–∫** ‚Äî `contextlib.suppress`
12. **–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä** ‚Äî –ø—Ä–∞–∫—Ç–∏–∫–∞ —Å–æ –≤—Å–µ–º–∏ –≤–∏–¥–∞–º–∏ –æ—à–∏–±–æ–∫

---

## ‚ñ∂Ô∏è –ö–∞–∫ –∑–∞–ø—É—Å–∫–∞—Ç—å
–ü—Ä–∏–º–µ—Ä –∑–∞–ø—É—Å–∫–∞ –ª—é–±–æ–π –∑–∞–¥–∞—á–∏:
```bash
python task01_safe_input.py
```

–î–ª—è –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞ (Task 12):
```bash
python task12_console_calc.py
```

---

## ‚úÖ –ö—Ä–∏—Ç–µ—Ä–∏–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏
- –í—Å–µ 12 –∑–∞–¥–∞—á —Ä–µ—à–µ–Ω—ã –∏ –ø—Ä–æ—Ö–æ–¥—è—Ç —Ç–µ—Å—Ç–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏
- –°–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ç–∞–º, –≥–¥–µ –Ω—É–∂–Ω–æ
- `try/except/else/finally` –ø—Ä–∏–º–µ–Ω–µ–Ω—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- –û—à–∏–±–∫–∏ –ø—Ä–æ–±—Ä–∞—Å—ã–≤–∞—é—Ç—Å—è –∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è
- –ü–æ–¥–∞–≤–ª–µ–Ω–∏–µ (`suppress`) –∏ —Ü–µ–ø–æ—á–∫–∏ (`from e`) –ø–æ–∫–∞–∑–∞–Ω—ã –≤ —Ä–∞–±–æ—Ç–µ
- –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ —Ü–∏–∫–ª–µ, –Ω–µ –ø–∞–¥–∞–µ—Ç, –¥—Ä—É–∂–µ–ª—é–±–Ω–æ —Å–æ–æ–±—â–∞–µ—Ç –æ–± –æ—à–∏–±–∫–∞—Ö

---

## üõü –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫
- **`UnboundLocalError` –≤ `finally`** ‚Äî –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–π –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –¥–æ `try` (`f = None`)
- **`suppress(Exception)` –≥–∞—Å–∏—Ç –≤—Å—ë** ‚Äî –∏—Å–ø–æ–ª—å–∑—É–π —Ç–æ–ª—å–∫–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Ç–∏–ø—ã (`FileExistsError`)
- **`isdigit()` –∏ –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–µ —á–∏—Å–ª–∞** ‚Äî –ª—É—á—à–µ –ø–∞—Ä—Å–∏—Ç—å —á–µ—Ä–µ–∑ `int()` –∏ –ª–æ–≤–∏—Ç—å `ValueError`
- **CSV –ø–∞—Ä—Å–∏–Ω–≥ –ª–æ–º–∞–µ—Ç—Å—è** ‚Äî –ø—Ä–∏–º–µ–Ω—è–π `csv.DictReader`, –∞ –Ω–µ —Ä–∞–∑–±–∏–µ–Ω–∏–µ —Å—Ç—Ä–æ–∫ –≤—Ä—É—á–Ω—É—é
- **–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –ø–∞–¥–∞–µ—Ç –ø—Ä–∏ –Ω–µ–≤–µ—Ä–Ω–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏** ‚Äî –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–π `OperationNotSupportedError` –∏ –≤—ã–≤–æ–¥–∏ –ø–æ–¥—Å–∫–∞–∑–∫—É
